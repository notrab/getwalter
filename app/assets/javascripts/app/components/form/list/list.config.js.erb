(function() {
  'use strict';

  angular
    .module('walterApp.form.list')
    .config(ListFormConfig)
    .constant('AccessLevels', {guest: 0, user: 1})
  ;

  ListFormConfig.$inject = ['$stateProvider', 'AccessLevels'];
  function ListFormConfig ($stateProvider, AccessLevels) {
    $stateProvider
      .state('forms', {
        parent: 'dashboard',
        url: '/forms',
        data: {
          access: AccessLevels.user
        }
      })

      .state('forms.new', {
        url: '/new',
        data: {
          pageTitle: 'New Form'
        },
        views: {
          'navbar@dashboard': {
            template: '<navbar />'
          },

          'header@dashboard': {
            templateUrl: "<%= asset_path('app/components/form/new/header.html') %>"
          },

          'content@dashboard': {
            templateUrl: "<%= asset_path('app/components/form/new/new.html') %>",
            controller: 'NewFormController',
            controllerAs: 'new'
          }
        }
      })

      .state('forms.show', {
        url: '/{id:int}',
        resolve: {
          formRes: ['Form', '$stateParams', function(Form, $stateParams) {
            return Form.get({
              id: $stateParams.id
            }).$promise.then(function(data) {
              return data;
            });
          }]
        },
        views: {
          'navbar@dashboard': {
            template: '<navbar />'
          },

          'header@dashboard': {
            templateUrl: "<%= asset_path('app/components/form/show/header.html') %>"
          },

          'content@dashboard': {
            templateUrl: "<%= asset_path('app/components/form/show/show.html') %>",
            controller: 'ShowFormController',
            controllerAs: 'form'
          }
        }
      })

      .state('forms.edit', {
        url: '/{id:int}/edit',
        resolve: {
          formRes: ['Form', '$stateParams', function(Form, $stateParams) {
            return Form.get({
              id: $stateParams.id
            }).$promise.then(function(data) {
              return data;
            });
          }]
        },
        views: {
          'navbar@dashboard': {
            template: '<navbar />'
          },

          'header@dashboard': {
            templateUrl: "<%= asset_path('app/components/form/show/header.html') %>"
          },

          'content@dashboard': {
            templateUrl: "<%= asset_path('app/components/form/edit/form.edit.html') %>",
            controller: 'EditFormController',
            controllerAs: 'edit'
          }
        }
      })
    ;
  }
})();
